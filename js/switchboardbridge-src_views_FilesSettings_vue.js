"use strict";(self.webpackChunkswitchboardbridge=self.webpackChunkswitchboardbridge||[]).push([["src_views_FilesSettings_vue"],{5776(t,e,i){i.d(e,{A:()=>o});var n=i(1354),s=i.n(n),a=i(6314),l=i.n(a)()(s());l.push([t.id,"\n.wrapper[data-v-16b0f112] {\n\t\tmargin-top: 15px;\n\t\tmargin-bottom: 5px;\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tflex-direction: column;\n}\n#title[data-v-16b0f112], #popupbox[data-v-16b0f112] {\n\t\talign-self: start;\n}\n","",{version:3,sources:["webpack://./src/views/FilesSettings.vue"],names:[],mappings:";AAiJC;EACC,gBAAgB;EAChB,kBAAkB;EAClB,aAAa;EACb,qBAAqB;EACrB,sBAAsB;AACvB;AACA;EACC,iBAAiB;AAClB",sourcesContent:['<template>\n\t<div class="wrapper">\n\t\t<h4 id="title">\n\t\t\tSwitchboard settings\n\t\t</h4>\n\t\t<NcTextField v-model="switchboardUrl"\n\t\t\tlabel="Switchboard URL"\n\t\t\t:helper-text="helpText"\n\t\t\ttype="url"\n\t\t\tplaceholder="e.g. https://switchboard.clarin.eu"\n\t\t\ttrailing-button-icon="undo"\n\t\t\ttrailing-button-label="Reset to default"\n\t\t\t:show-trailing-button="switchboardUrl !== switchboardDefaultUrl"\n\t\t\t:error="invalid"\n\t\t\t:success="submitted"\n\t\t\t@trailing-button-click="reset"\n\t\t\t@update:modelValue="updateUI">\n\t\t\t<template #icon>\n\t\t\t\t<LinkEdit :size="20" />\n\t\t\t</template>\n\t\t</NcTextField>\n\t\t<NcActions :force-name="true">\n\t\t\t<NcActionButton :disabled="submitDisabled" @click="submit">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<ContentSaveOutline :size="20" />\n\t\t\t\t</template>\n\t\t\t\tSave\n\t\t\t</NcActionButton>\n\t\t</NcActions>\n\t\t<div id="popupbox">\n\t\t\t<NcCheckboxRadioSwitch :model-value="usePopUp" :loading="loading" @update:modelValue="togglePopUp">\n\t\t\t\tUse Switchboard on-screen pop-up to open single files (experimental)\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { emit } from \'@nextcloud/event-bus\'\nimport axios from \'@nextcloud/axios\'\nimport { generateUrl } from \'@nextcloud/router\'\nimport { NcActions, NcActionButton, NcTextField, NcCheckboxRadioSwitch } from \'@nextcloud/vue\'\nimport LinkEdit from \'vue-material-design-icons/LinkEdit.vue\'\nimport ContentSaveOutline from \'vue-material-design-icons/ContentSaveOutline.vue\'\n\nconst defaultHelpText = \'The URL of the CLARIN Language Resource Switchboard\'\n\nexport default {\n\tname: \'FilesSettings\',\n\tcomponents: {\n\t\tNcTextField,\n\t\tNcActions,\n\t\tNcActionButton,\n\t\tNcCheckboxRadioSwitch,\n\t\tLinkEdit,\n\t\tContentSaveOutline,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tswitchboardUrl: OCA.SwitchboardBridge.SwitchboardUrl,\n\t\t\tswitchboardSavedUrl: OCA.SwitchboardBridge.SwitchboardUrl,\n\t\t\tswitchboardDefaultUrl: OCA.SwitchboardBridge.SwitchboardDefaultUrl,\n\t\t\tusePopUp: OCA.SwitchboardBridge.UsePopUp,\n\t\t\tsubmitted: false,\n\t\t\tinvalid: false,\n\t\t\tloading: false,\n\t\t\tsubmitDisabled: true,\n\t\t\thelpText: defaultHelpText,\n\t\t}\n\t},\n\tmethods: {\n\t\treset() {\n\t\t\tthis.switchboardUrl = this.switchboardDefaultUrl\n\t\t\tthis.setValid()\n\t\t\tthis.submitDisabled = this.switchboardUrl.trim() === this.switchboardSavedUrl.trim()\n\t\t},\n\t\tsubmit() {\n\t\t\tif (this.switchboardUrl) {\n\t\t\t\taxios.post(generateUrl(\'/apps/switchboardbridge/settings\'), {\n\t\t\t\t\tkey: \'switchboard_url\',\n\t\t\t\t\tvalue: this.switchboardUrl,\n\t\t\t\t}).then(response => {\n\t\t\t\t\temit(\'SwitchboardBridge::sbUrlChanged\', {\n\t\t\t\t\t\tnewUrl: this.switchboardUrl,\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.switchboardSavedUrl = this.switchboardUrl\n\t\t\t\t\tthis.submitted = true\n\t\t\t\t\tthis.helpText = \'Success!\'\n\t\t\t\t\tthis.submitDisabled = true\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tupdateUI() {\n\t\t\tthis.submitted = false\n\t\t\tif (this.switchboardSavedUrl === this.switchboardUrl) {\n\t\t\t\tthis.submitDisabled = true\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.validate()\n\t\t},\n\t\tvalidate() {\n\t\t\tif (this.isValidUrl(this.switchboardUrl)) {\n\t\t\t\tthis.setValid()\n\t\t\t} else {\n\t\t\t\tthis.setInvalid()\n\t\t\t}\n\t\t},\n\t\tsetValid() {\n\t\t\tthis.helpText = defaultHelpText\n\t\t\tthis.invalid = false\n\t\t\tthis.submitDisabled = false\n\t\t},\n\t\tsetInvalid() {\n\t\t\tthis.helpText = \'Must be a valid URL in the form: "https://..."\'\n\t\t\tthis.invalid = true\n\t\t\tthis.submitDisabled = true\n\t\t},\n\t\tisValidUrl(string) {\n\t\t\tlet url\n\t\t\ttry {\n\t\t\t\turl = new URL(string)\n\t\t\t} catch (_) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn url.protocol === \'https:\' && string.startsWith(\'https://\')\n\t\t},\n\t\ttogglePopUp() {\n\t\t\tthis.loading = true\n\t\t\tthis.usePopUp = !this.usePopUp\n\t\t\taxios.post(generateUrl(\'/apps/switchboardbridge/settings\'), {\n\t\t\t\tkey: \'use_switchboard_popup\',\n\t\t\t\tvalue: this.usePopUp ? \'1\' : \'0\',\n\t\t\t}).then(response => {\n\t\t\t\temit(\'SwitchboardBridge::usePopUpToggled\')\n\t\t\t\tthis.loading = false\n\t\t\t})\n\t\t},\n\t},\n\torder: -99,\n}\n\n<\/script>\n\n<style lang="css" scoped>\n\t.wrapper {\n\t\tmargin-top: 15px;\n\t\tmargin-bottom: 5px;\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tflex-direction: column;\n\t}\n\t#title, #popupbox {\n\t\talign-self: start;\n\t}\n</style>\n'],sourceRoot:""}]);const o=l},8829(t,e,i){i.d(e,{default:()=>N});var n=i(641);const s={class:"wrapper"},a={id:"popupbox"};var l=i(1338),o=i(6802),r=i(3814),d=i(6084),h=i(255),c=i(4961);const u="The URL of the CLARIN Language Resource Switchboard",b={name:"FilesSettings",components:{NcTextField:d.v,NcActions:d.B6,NcActionButton:d.Ko,NcCheckboxRadioSwitch:d.AO,LinkEdit:h.A,ContentSaveOutline:c.A},data:()=>({switchboardUrl:OCA.SwitchboardBridge.SwitchboardUrl,switchboardSavedUrl:OCA.SwitchboardBridge.SwitchboardUrl,switchboardDefaultUrl:OCA.SwitchboardBridge.SwitchboardDefaultUrl,usePopUp:OCA.SwitchboardBridge.UsePopUp,submitted:!1,invalid:!1,loading:!1,submitDisabled:!0,helpText:u}),methods:{reset(){this.switchboardUrl=this.switchboardDefaultUrl,this.setValid(),this.submitDisabled=this.switchboardUrl.trim()===this.switchboardSavedUrl.trim()},submit(){this.switchboardUrl&&o.Ay.post((0,r.Jv)("/apps/switchboardbridge/settings"),{key:"switchboard_url",value:this.switchboardUrl}).then(t=>{(0,l.Ic)("SwitchboardBridge::sbUrlChanged",{newUrl:this.switchboardUrl}),this.switchboardSavedUrl=this.switchboardUrl,this.submitted=!0,this.helpText="Success!",this.submitDisabled=!0})},updateUI(){this.submitted=!1,this.switchboardSavedUrl!==this.switchboardUrl?this.validate():this.submitDisabled=!0},validate(){this.isValidUrl(this.switchboardUrl)?this.setValid():this.setInvalid()},setValid(){this.helpText=u,this.invalid=!1,this.submitDisabled=!1},setInvalid(){this.helpText='Must be a valid URL in the form: "https://..."',this.invalid=!0,this.submitDisabled=!0},isValidUrl(t){let e;try{e=new URL(t)}catch(t){return!1}return"https:"===e.protocol&&t.startsWith("https://")},togglePopUp(){this.loading=!0,this.usePopUp=!this.usePopUp,o.Ay.post((0,r.Jv)("/apps/switchboardbridge/settings"),{key:"use_switchboard_popup",value:this.usePopUp?"1":"0"}).then(t=>{(0,l.Ic)("SwitchboardBridge::usePopUpToggled"),this.loading=!1})}},order:-99};var p=i(5072),g=i.n(p),w=i(7825),m=i.n(w),U=i(7659),v=i.n(U),A=i(5056),f=i.n(A),S=i(540),x=i.n(S),C=i(1113),k=i.n(C),B=i(5776),T={};T.styleTagTransform=k(),T.setAttributes=f(),T.insert=v().bind(null,"head"),T.domAPI=m(),T.insertStyleElement=x();g()(B.A,T);B.A&&B.A.locals&&B.A.locals;const N=(0,i(6262).A)(b,[["render",function(t,e,i,l,o,r){const d=(0,n.g2)("LinkEdit"),h=(0,n.g2)("NcTextField"),c=(0,n.g2)("ContentSaveOutline"),u=(0,n.g2)("NcActionButton"),b=(0,n.g2)("NcActions"),p=(0,n.g2)("NcCheckboxRadioSwitch");return(0,n.uX)(),(0,n.CE)("div",s,[e[3]||(e[3]=(0,n.Lk)("h4",{id:"title"}," Switchboard settings ",-1)),(0,n.bF)(h,{modelValue:o.switchboardUrl,"onUpdate:modelValue":[e[0]||(e[0]=t=>o.switchboardUrl=t),r.updateUI],label:"Switchboard URL","helper-text":o.helpText,type:"url",placeholder:"e.g. https://switchboard.clarin.eu","trailing-button-icon":"undo","trailing-button-label":"Reset to default","show-trailing-button":o.switchboardUrl!==o.switchboardDefaultUrl,error:o.invalid,success:o.submitted,onTrailingButtonClick:r.reset},{icon:(0,n.k6)(()=>[(0,n.bF)(d,{size:20})]),_:1},8,["modelValue","helper-text","show-trailing-button","error","success","onTrailingButtonClick","onUpdate:modelValue"]),(0,n.bF)(b,{"force-name":!0},{default:(0,n.k6)(()=>[(0,n.bF)(u,{disabled:o.submitDisabled,onClick:r.submit},{icon:(0,n.k6)(()=>[(0,n.bF)(c,{size:20})]),default:(0,n.k6)(()=>[e[1]||(e[1]=(0,n.eW)(" Save ",-1))]),_:1},8,["disabled","onClick"])]),_:1}),(0,n.Lk)("div",a,[(0,n.bF)(p,{"model-value":o.usePopUp,loading:o.loading,"onUpdate:modelValue":r.togglePopUp},{default:(0,n.k6)(()=>[...e[2]||(e[2]=[(0,n.eW)(" Use Switchboard on-screen pop-up to open single files (experimental) ",-1)])]),_:1},8,["model-value","loading","onUpdate:modelValue"])])])}],["__scopeId","data-v-16b0f112"]])}}]);
//# sourceMappingURL=switchboardbridge-src_views_FilesSettings_vue.js.map?v=29a947bc8228596f4c99